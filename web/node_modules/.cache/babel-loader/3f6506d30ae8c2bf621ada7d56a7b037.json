{"ast":null,"code":"var _jsxFileName = \"/Users/ericlynch/eclipse-workspace/Servo/web/src/GroupList.js\";\nimport React, { Component } from 'react';\nimport { Button, ButtonGroup, Container, Table } from 'reactstrap';\nimport AppNavbar from './AppNavbar';\nimport { Link, withRouter } from 'react-router-dom';\nimport { instanceOf } from 'prop-types';\nimport { withCookies, Cookies } from 'react-cookie';\n\nclass GroupList extends Component {\n  constructor(props) {\n    super(props);\n    const cookies = props.cookies;\n    this.state = {\n      groups: [],\n      csrfToken: cookies.get('XSRF-TOKEN'),\n      isLoading: true\n    };\n    this.remove = this.remove.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      isLoading: true\n    });\n    fetch('api/groups', {\n      credentials: 'include'\n    }).then(response => response.json()).then(data => this.setState({\n      groups: data,\n      isLoading: false\n    })).catch(() => this.props.history.push('/'));\n  }\n\n  async remove(id) {\n    await fetch(\"/api/group/\".concat(id), {\n      method: 'DELETE',\n      headers: {\n        'X-XSRF-TOKEN': this.state.csrfToken,\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include'\n    }).then(() => {\n      let updatedGroups = [...this.state.groups].filter(i => i.id !== id);\n      this.setState({\n        groups: updatedGroups\n      });\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          groups = _this$state.groups,\n          isLoading = _this$state.isLoading;\n\n    if (isLoading) {\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, \"Loading...\");\n    }\n\n    const groupList = groups.map(group => {\n      const address = \"\".concat(group.address || '', \" \").concat(group.city || '', \" \").concat(group.stateOrProvince || '');\n      return React.createElement(\"tr\", {\n        key: group.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        style: {\n          whiteSpace: 'nowrap'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, group.name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, address), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, group.events.map(event => {\n        return React.createElement(\"div\", {\n          key: event.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, new Intl.DateTimeFormat('en-US', {\n          year: 'numeric',\n          month: 'long',\n          day: '2-digit'\n        }).format(new Date(event.date)), \": \", event.title);\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(ButtonGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(Button, {\n        size: \"sm\",\n        color: \"primary\",\n        tag: Link,\n        to: \"/groups/\" + group.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"Edit\"), React.createElement(Button, {\n        size: \"sm\",\n        color: \"danger\",\n        onClick: () => this.remove(group.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"Delete\"))));\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(AppNavbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(Container, {\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"float-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"success\",\n      tag: Link,\n      to: \"/groups/new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Add Group\")), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"My JUG Tour\"), React.createElement(Table, {\n      className: \"mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      width: \"20%\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      width: \"20%\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Location\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Events\"), React.createElement(\"th\", {\n      width: \"10%\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Actions\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, groupList))));\n  }\n\n}\n\nGroupList.propTypes = {\n  cookies: instanceOf(Cookies).isRequired\n};\nexport default withCookies(withRouter(GroupList));","map":{"version":3,"sources":["/Users/ericlynch/eclipse-workspace/Servo/web/src/GroupList.js"],"names":["React","Component","Button","ButtonGroup","Container","Table","AppNavbar","Link","withRouter","instanceOf","withCookies","Cookies","GroupList","constructor","props","cookies","state","groups","csrfToken","get","isLoading","remove","bind","componentDidMount","setState","fetch","credentials","then","response","json","data","catch","history","push","id","method","headers","updatedGroups","filter","i","render","groupList","map","group","address","city","stateOrProvince","whiteSpace","name","events","event","Intl","DateTimeFormat","year","month","day","format","Date","date","title","propTypes","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, ButtonGroup, Container, Table } from 'reactstrap';\nimport AppNavbar from './AppNavbar';\nimport { Link, withRouter } from 'react-router-dom';\nimport { instanceOf } from 'prop-types';\nimport { withCookies, Cookies } from 'react-cookie';\n\nclass GroupList extends Component {\n\n\tstatic propTypes = {\n\t    cookies: instanceOf(Cookies).isRequired\n\t  };\n\n\t  constructor(props) {\n\t    super(props);\n\t    const {cookies} = props;\n\t    this.state = {groups: [], csrfToken: cookies.get('XSRF-TOKEN'), isLoading: true};\n\t    this.remove = this.remove.bind(this);\n\t  }\n\n\t  componentDidMount() {\n\t    this.setState({isLoading: true});\n\n\t    fetch('api/groups', {credentials: 'include'})\n\t      .then(response => response.json())\n\t      .then(data => this.setState({groups: data, isLoading: false}))\n\t      .catch(() => this.props.history.push('/'));\n\t  }\n\n\t  async remove(id) {\n\t    await fetch(`/api/group/${id}`, {\n\t      method: 'DELETE',\n\t      headers: {\n\t        'X-XSRF-TOKEN': this.state.csrfToken,\n\t        'Accept': 'application/json',\n\t        'Content-Type': 'application/json'\n\t      },\n\t      credentials: 'include'\n\t    }).then(() => {\n\t        let updatedGroups = [...this.state.groups].filter(i => i.id !== id);\n\t        this.setState({groups: updatedGroups});\n\t      });\n\t  }\n\n  render() {\n    const {groups, isLoading} = this.state;\n\n    if (isLoading) {\n      return <p>Loading...</p>;\n    }\n\n    const groupList = groups.map(group => {\n      const address = `${group.address || ''} ${group.city || ''} ${group.stateOrProvince || ''}`;\n      return <tr key={group.id}>\n        <td style={{whiteSpace: 'nowrap'}}>{group.name}</td>\n        <td>{address}</td>\n        <td>{group.events.map(event => {\n          return <div key={event.id}>{new Intl.DateTimeFormat('en-US', {\n            year: 'numeric',\n            month: 'long',\n            day: '2-digit'\n          }).format(new Date(event.date))}: {event.title}</div>\n        })}</td>\n        <td>\n          <ButtonGroup>\n            <Button size=\"sm\" color=\"primary\" tag={Link} to={\"/groups/\" + group.id}>Edit</Button>\n            <Button size=\"sm\" color=\"danger\" onClick={() => this.remove(group.id)}>Delete</Button>\n          </ButtonGroup>\n        </td>\n      </tr>\n    });\n\n    return (\n      <div>\n        <AppNavbar/>\n        <Container fluid>\n          <div className=\"float-right\">\n            <Button color=\"success\" tag={Link} to=\"/groups/new\">Add Group</Button>\n          </div>\n          <h3>My JUG Tour</h3>\n          <Table className=\"mt-4\">\n            <thead>\n            <tr>\n              <th width=\"20%\">Name</th>\n              <th width=\"20%\">Location</th>\n              <th>Events</th>\n              <th width=\"10%\">Actions</th>\n            </tr>\n            </thead>\n            <tbody>\n            {groupList}\n            </tbody>\n          </Table>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default withCookies(withRouter(GroupList));"]},"metadata":{},"sourceType":"module"}